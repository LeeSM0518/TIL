# 자바 8, 9, 10, 11: 무슨 일이 일어나고 있는가?

<br>

# 1.1. 역사의 흐름은 무엇인가?

* **사과 목록을 무게순으로 정렬하는 고전적 코드**

  ```java
  Collection.sort(inventory, new Comparator<Apple>() {
    public int compare(Apple a1, Apple a2) {
      return a1.getWeight().compareTo(a2.getWeight());
    }
  })
  ```

* **자바 8을 이용하여 자연어에 더 가깝게 간단한 방식으로 구현한 코드**

  ```java
  inventory.sort(comparing(Apple::getWeight))
  ```

  > 훨씬 간단하게 구현되는 것을 확인할 수 있다.

<br>

자바 8에서 부터는 병렬 실행을 새롭고 단순한 방식으로 접근할 수 있는 방법을 제공한다. 하지만 이 새로운 기법을 이용하려면 몇 가지 규칙을 지켜야 하는데 그 규칙들을 학습해보도록 하자.

<br>

* **자바 8의 기반이 되는 요구 사항**
  * 간결한 코드, 멀티코어 프로세서의 쉬운 활용 => **함수형 프로그래밍(functional-style programming)**
    * **스트림 API**
    * 메서드에 코드를 전달하는 기법 **(메서드 참조와 람다)** : 새롭고 간결한 방식으로 동작 파라미터화(behavior parameterization) 구현 가능
    * 인터페이스의 **디폴트 메서드**

<br>

# 1.2. 자바 8 설계의 밑바탕

## 1.2.1. 스트림 처리

* **스트림** : 한 번에 한 개씩 만들어지는 연속적인 데이터 항목들의 모임이다.
  * 자바 8에는 java.util.stream 패키지에 스트림 API가 추가되었다. 스트림 패키지에 정의된 Stream\<T>는 T 형식으로 구성된 일련의 항목을 의미한다.
  * 자바 8에서는 우리가 하려는 작업을 고수준 추상화해서 일련의 스트림으로 만들어 한 번에 처리할 수 있다.
  * 스트림 파이프라인을 이용해서 입력 부분을 여러 CPU 코어에 쉽게 할당할 수 있다.

</br>

## 1.2.2. 동작 파라미터화로 메서드에 코드 전달하기

* 자바 8에서는 메서드(우리 코드)를 다른 메서드의 인수로 넘겨주는 기능을 제공한다. 이러한 기능을 이론적으로 **동작 파라미터화(behavior parameterization)** 라 한다.

</br>

## 1.2.3. 병렬성과 공유 가변 데이터

* 스트림 메서드로 전달하는 코드는 다른 코드와 동시에 실행하더라도 안전하게 실행될 수 있어야 한다.
  * **안전하게 실행할 수 있는 코드란** 공유된 가변 데이터에 접근을 하지 않게 하는 코드이다. 이러한 함수를 순수 함수, 부작용 없는 함수, 상태 없는 함수라 한다.
* 공유되지 않은 가변 데이터, 메서드, 함수 코드를 다른 메서드로 전달하는 두가지 기능은 **함수형 프로그래밍** 패러다임의 핵심적인 사항이다. 

</br>

# 1.3. 자바 함수

프로그래밍 언어에서 **함수(function)** 라는 용어는 **메서드(method)** 특히 정적 메서드와 같은 의미로 사용된다. 

자바의 함수는 이베 더해 **수학적인 함수** 처럼 사용되며 부작용을 일으키지 않는 함수를 의미한다.

* **왜 함수가 필요할까?**
  * 프로그래밍 언어의 핵심은 값을 바꾸는 것이다. 프로그래밍 언어에서는 이 값을 일급값(시민)이라 부른다.
  * 메서드를 값으로 만들면 프로그래밍에 유용하게 활용할 수 있다.

</br>

## 1.3.1. 메서드와 람다를 일급 시민으로

자바 8의 기능들

* **메서드 참조(method refernce)**

  * **예시) 숨겨진 파일을 필터링**

    자바 8 이전의 코드

    ```java
    File[] hiddenFiles = new File(".").listFiles(new FileFilter() {
      public boolean accept(File file) {
        return file.isHidden();						// 숨겨진 파일 필터링!
      }
    });
    ```

    > 단 세 행의 코드지만 각 행이 무슨 작업을 하는지 투명하지 않다.

    자바 8 코드

    ```java
    File[] hiddenFiles = new File(".").listFiles(File::isHidden);
    ```

    > 자바 8의 **메서드 참조(::)를** 이용해서 listFiles에 직접 전달할 수 있게 되어 코드가 훨씬 깔끔해졌다.

</br>

* **람다 : 익명 함수**
  * 

C, C++ 는 프로그래밍 안전성은 부족하지만 작은 런타임 풋프린트(footprint) 덕분에 운영체제와 다양한 임베디드 시스템에서 여전히 인기를 끌고 있다. 하지만 C, C++의 낮은 안정성 때문에 프로그램이 예기치 않게 종료되거나 바이러스 등이 침투할 수 있는 보안 구멍이 있을 수 있다. 

 자바는 지난 1995년 첫 베타 버전이 공개된 이후로 경쟁 언어로 대신하며 커다란 생태계를 성공적으로 구축했다.

</br>

## 1.2.1. 프로그래밍 언어 생태계에서 자바의 위치

자바는 코드를 JVM 바이트 코드로 컴파일하는 특징 때문에 자바는 인터넷 애플릿 프로그램의 주요 언어가 되었다. 

